<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>üìù –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h1>
    <form id="register-form">
        <input type="text" name="username" placeholder="–õ–æ–≥–∏–Ω" required><br>
        <input type="password" name="password" placeholder="–ü–∞—Ä–æ–ª—å" required><br>
        <select name="role" required>
            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–æ–ª—å</option>
            <option value="user">–ß–∏—Ç–∞—é—â–∏–π</option>
            <option value="admin">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</option>
        </select><br>
        <button type="submit">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
    </form>
    <p>–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <a href="index.html">–í–æ–π—Ç–∏</a></p>

    <script>
        document.getElementById("register-form").addEventListener("submit", async (e) => {
            e.preventDefault();
            const data = new URLSearchParams(new FormData(e.target));
            const res = await fetch("/register", { method: "POST", body: data });
            if (res.ok) {
                alert("–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞! –í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤—Ö–æ–¥.");
                window.location.href = "index.html";
            } else {
                alert("–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏");
            }
        });
    </script>
</body>
</html>
